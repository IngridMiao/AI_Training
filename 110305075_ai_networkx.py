# -*- coding: utf-8 -*-
"""110305075_AI_NetworkX.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1KJ2GNtzwC7ZNwwQ39aq4Z0O7R11ELquB

# 2025/03/27 äººå·¥æ™ºæ…§æ–¹æ³•èˆ‡å·¥å…·_TA03

TAï¼šå¾éˆºè“‰ \
mailï¼š110306091@nccu.edu.tw \
Feel free to contact me if you have any questionsğŸ˜Š

1. æ‹¿åˆ°æª”æ¡ˆè«‹åœ¨ **æª”æ¡ˆ>åœ¨é›²ç«¯ç¡¬ç¢Ÿä¸­è¤‡è£½å„²å­˜å‰¯æœ¬** å°‡æª”æ¡ˆè¤‡è£½è‡³è‡ªå·±çš„é›²ç«¯å¾Œå†é€²è¡Œä½œæ¥­çš„ä¿®æ”¹
2. å®Œæˆquizå¾Œä¸Šå‚³è‡³moodl

## Get Data

è«‹å…ˆåˆ°å…±ç”¨é›²ç«¯ç¡¬ç¢Ÿå°‡æª”æ¡ˆ`Pokemon.zip`ï¼Œå»ºç«‹æ·å¾‘åˆ°è‡ªå·±çš„é›²ç«¯ç¡¬ç¢Ÿä¸­ã€‚

> æ“ä½œæ­¥é©Ÿ
1. é»é–‹é›²ç«¯[é€£çµ](https://drive.google.com/file/d/1akt2lMsjBRKa1QxzoSEUgsLNIPOk1JLB/view?usp=sharing)
2. é»é¸å³ä¸Šè§’ã€Œæ–°å¢é›²ç«¯ç¡¬ç¢Ÿæ·å¾‘ã€
3. é»é¸ã€Œæˆ‘çš„é›²ç«¯ç¡¬ç¢Ÿã€
4. é»é¸ã€Œæ–°å¢æ·å¾‘ã€

å®Œæˆä»¥ä¸Šæµç¨‹æœƒåœ¨ä½ çš„é›²ç«¯ç¡¬ç¢Ÿä¸­å»ºç«‹ä¸€å€‹æª”æ¡ˆçš„æ·å¾‘ï¼Œæ¥è‘—æˆ‘å€‘åœ¨colabä¸­å–å¾—æ¬Šé™å³å¯ä½¿ç”¨ã€‚

# æ›è¼‰é›²ç«¯ç¡¬ç¢Ÿ & packages
"""

from google.colab import drive
drive.mount('/content/drive')

"""# è®€å–è³‡æ–™ & æŸ¥çœ‹æ¦‚æ³

https://www.kaggle.com/datasets/abcsds/pokemon

æ³¨æ„: è‹¥æœ‰å¦å¤–è¨­å®šå­˜æ”¾åœ¨é›²ç«¯ç¡¬ç¢Ÿä¸­çš„è·¯å¾‘ï¼Œè«‹è¨˜å¾—æœ¬è™•è·¯å¾‘ä¹Ÿé ˆåšæ›´å‹•ã€‚
"""

!unzip -qq ./drive/My\ Drive/Pokemon.zip

#!unzip -qq ./drive/My\ Drive/Colab_Notebooks/AI_Method_And_Tools/Pokemon.zip

"""è‹¥ä¸Šè¿°æ–¹å¼ç„¡æ³•æˆåŠŸå–å¾—è³‡æ–™çš„åŒå­¸å¯ä»¥ä½¿ç”¨æ­¤æ–¹å¼ \
1. ä¸‹è¼‰.zip æª”æ¡ˆ
2. è§£å£“ç¸®
3. å–æ¶ˆä¸‹æ–¹è¨»è§£å…§å®¹ï¼Œæ‰‹å‹•ä¸Šå‚³è³‡æ–™

ä½¿ç”¨æ­¤æ–¹æ³•çš„åŒå­¸é ˆæ³¨æ„æª”æ¡ˆåç¨±!!
"""

# from google.colab import files
# uploaded = files.upload()

"""---

"""

# å¦‚æœä¸Šè¿°æ–¹æ³•éƒ½ä¸é©ç”¨ï¼Œè«‹å–æ¶ˆæ­¤æ®µè¨»è§£
# import pandas as pd
# sheet_url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSQjTluTezvO3TB6rEcRF1EkjmXApDXJelBHNQzGUy3y-xR1PuqBS-vTyLAyMd3OJGhM6hoakBU9p-h/pub?output=csv"
# pokemon = pd.read_csv(sheet_url)

# ä½¿ç”¨ pandas è®€å–è³‡æ–™ pd.read_csv()
import pandas as pd
pokemon = pd.read_csv('Pokemon.csv')

# æŸ¥çœ‹å‰ 5 ç­†è³‡æ–™
pokemon.head()

# æŸ¥çœ‹ç°¡æ˜“çš„èªªæ˜ï¼šæ¯æ¬„ç­†æ•¸/ç„¡ç¼ºå¤±å€¼æ•¸é‡/å‹æ…‹
pokemon.info()

# æŸ¥çœ‹ numerical data çš„çµ±è¨ˆè®Šé‡ df.describe()
pokemon.describe()

# æŸ¥çœ‹å…±æœ‰å¹¾ç¨®ç¥å¥‡å¯¶è² .nunique()
print("Number of pokemon: " + str(pokemon['Name'].nunique())) #str():å°‡å‹æ…‹è½‰æ›ç‚ºå­—ä¸²

pokemon['Generation'] = pokemon.Generation.astype('category') #pokemon['Generation'] æ•¸å€¼ --> category

import numpy as np
# é‡å° Type 2 è£œå€¼ï¼Œç©ºå€¼è£œ 0ï¼Œinplace = True ä»£è¡¨ ä¿®æ”¹å¾Œè¦†è“‹åŸå§‹æª”æ¡ˆ
pokemon['Type 2'].replace(np.nan, '0',inplace=True) #replace('1','2') -->ç”¨'2'å–ä»£'1'
# pokemon['Type 2'].fillna('0', inplace=True)

# æŸ¥çœ‹ Type 2 çš„å„ç¨®é¡è¨ˆæ•¸
pokemon['Type 2'].value_counts()

"""# Bar Plot

"""

# è¼‰å…¥ç›¸é—œå¥—ä»¶
import numpy as np
import networkx as nx
import seaborn as sns
import matplotlib.pyplot as plt

# use plt to draw bar chart
top_25 = pokemon.sort_values(by='Total', ascending=False).head(25)

# ç¹ªè£½é•·æ¢åœ–
plt.figure(figsize=(10, 6))  # è¨­å®šåœ–çš„å¤§å°
plt.barh(top_25['Name'], top_25['Total'], color='skyblue',height=0.8)  # æ°´å¹³é•·æ¢åœ– .barh(x1,x2) #å‚ç›´é•·æ¢åœ– .bar(x1,x2)
plt.xlabel('Total')  # è¨­å®š x è»¸æ¨™ç±¤
plt.ylabel('Pokemon')  # è¨­å®š y è»¸æ¨™ç±¤
plt.title('Top 25 PokÃ©mon by Total')  # è¨­å®šåœ–è¡¨æ¨™é¡Œ
plt.show()

# é•·æ¢åœ–: Total top 25 çš„ç¥å¥‡å¯¶è²
plt.figure(figsize=(10, 6))    # è¨­å®šåœ–çš„å¤§å°
ax = sns.barplot(x='Total', y='Name', data=pokemon.sort_values(by='Total', ascending=False).head(25))   # é•·æ¢åœ– barplot() x,y æ¬„ä½åç¨±
ax.set(xlabel='Total', ylabel='Pokemon')     # è¨­å®š x è»¸ / y è»¸åç¨±
plt.show()

# é•·æ¢åœ–: æ¯ç¨® Type 1 çš„ Defense å¹³å‡å€¼
plt.figure(figsize=(10, 6))    # è¨­å®šåœ–çš„å¤§å°
ax = sns.barplot(x='Type 1', y='Defense',hue="Type 1", data=pokemon.groupby(['Type 1'], as_index=False)['Defense'].mean())   # é•·æ¢åœ– barplot()
ax.set(xlabel='Type 1', ylabel='Defense')     # è¨­å®š x è»¸ / y è»¸åç¨±
ax.set_xticklabels(ax.get_xticklabels(), rotation=90)

plt.axhline(pokemon['Defense'].mean(), color='red', linestyle='--') # ç¸½é«” Defense å¹³å‡ç·š
plt.show()

# é•·æ¢åœ–: æ¯ç¨® Type 1 çš„ Defense å¹³å‡å€¼
# åˆ©ç”¨ hue å¢åŠ ç¨®é¡
plt.figure(figsize=(10, 6))    # è¨­å®šåœ–çš„å¤§å°
ax = sns.barplot(x='Type 1', y='Defense',hue="Legendary", data=pokemon.groupby(['Type 1','Legendary'], as_index=False)['Defense'].mean())   # é•·æ¢åœ– barplot()
ax.set(xlabel='Type 1', ylabel='Defense')     # è¨­å®š x è»¸ / y è»¸åç¨±
ax.set_xticklabels(ax.get_xticklabels(), rotation=90)

#plt.axhline() ç•«æ°´å¹³ç·š / plt.axvline() ç•«å‚ç›´ç·š
plt.axhline(pokemon[pokemon['Legendary']==True]['Defense'].mean(), color='red', linestyle='--') # æ˜¯Legendaryçš„ Defense å¹³å‡ç·š
plt.axhline(pokemon[pokemon['Legendary']==False]['Defense'].mean(), color='blue', linestyle=':') # ä¸æ˜¯Legendaryçš„ Defense å¹³å‡ç·š

plt.show()

"""# Pie Plot"""

# åœ“é¤…åœ–ï¼šlegendary & non-legendary åˆ†ä½ˆ
explode = np.arange(len(pokemon['Legendary'].value_counts().unique())) * 0.1   # çªå‡ºçš„éƒ¨åˆ†
colors = ['pink', 'yellow'] # è¨­å®šé¡è‰²

pokemon['Legendary'].value_counts().plot.pie(
    title="Percentage of Legendary & NoN-Legendary",
    figsize=(5, 3),
    startangle=90,  # èµ·å§‹è§’åº¦å¾ä¸Šæ–¹90åº¦é–‹å§‹
    explode=explode,
    colors=colors,
    autopct='%1.1f%%',   # æ¨™ç¤ºçš„æ ¼å¼ (ç™¾åˆ†æ¯”æ•¸å€¼ ä¿ç•™ä¸€ä½å°æ•¸)
    shadow=True) #å¢åŠ é™°å½±æ•ˆæœ

plt.tight_layout()       # èª¿æ•´ä½ˆå±€ï¼Œé¿å…æ¨™ç±¤æ“ å£“
plt.show()

# åœ“é¤…åœ–ï¼šgeneration åˆ†ä½ˆ
explode = np.arange(len(pokemon['Generation'].value_counts().unique())) * 0.01   # çªå‡ºçš„éƒ¨åˆ†
colors = ['red', 'blue', 'yellow', 'green', 'purple', 'orange']

pokemon['Generation'].value_counts().plot.pie(
    title="Percentage of Generation",
    figsize=(5, 3),
    startangle=90,  # èµ·å§‹è§’åº¦å¾ä¸Šæ–¹90åº¦é–‹å§‹
    explode=explode,
    colors=colors,
    autopct='%1.1f%%',   # æ¨™ç¤ºçš„æ ¼å¼
    shadow=True)

plt.tight_layout()       # èª¿æ•´ä½ˆå±€
plt.show()

# é¡è‰²ä¾ç…§generationæ’åº
generation_counts = pokemon['Generation'].value_counts().sort_index()  # Sort by Generation number
# explode = np.arange(len(generation_counts)) * 0.01
colors = ['red', 'blue', 'yellow', 'green', 'purple', 'orange']
generation_counts.plot.pie(
    title="Percentage of Generation",
    figsize=(5, 3),
    startangle=90,
    explode=np.arange(len(generation_counts)) * 0.01,
    colors=colors,
    autopct='%1.1f%%',
    shadow=True
)
plt.tight_layout()       # èª¿æ•´ä½ˆå±€
plt.show()

# ç¬¬ 1 ä¸–ä»£çš„ç¥å¥‡å¯¶è²ç¨®é¡(Type 1)åœ“é¤…åœ–
type1 = pokemon[pokemon['Generation'] == 1]['Type 1']
explode = np.arange(len(type1.unique())) * 0.01   # çªå‡ºçš„éƒ¨åˆ†

colors = ['red', 'blue', 'yellow', 'green', 'purple', 'orange', 'pink', 'brown']

type1.value_counts().plot.pie(
    figsize = (7,7),
    title = "Percentage of Different Type 1 of Pokemon",
    explode = explode,
    colors = colors,
    autopct = '%1.1f%%',   # æ¨™ç¤ºçš„æ ¼å¼
    shadow = True,
    startangle = 90       # èµ·å§‹è§’åº¦å¾ä¸Šæ–¹90åº¦é–‹å§‹
)

plt.tight_layout() # èª¿æ•´ä½ˆå±€
plt.show()

"""å°ç·´ç¿’: \
è«‹ç•«å‡ºç¥å¥‡å¯¶è²ç¨®é¡(Type 2)åœ“é¤…åœ–ï¼Œä¸¦å°‡ç©ºå€¼æ”¹ç‚º"NoLabel" \

æ³¨æ„: æ–¼æœ€ä¸€é–‹å§‹çš„æ“ä½œä¸­å·²å°‡ç©ºå€¼ç”¨'0'å–ä»£

"""

# å°ç·´ç¿’ï¼šç¥å¥‡å¯¶è²ç¨®é¡(Type 2)åœ“é¤…åœ–
# ç©ºå€¼(æ–¼å…ˆå‰æ“ä½œå·²è£œ0)è«‹å¡«å…¥"NoLabel"
for i in range(len(pokemon)):
  if pokemon['Type 2'][i] == '0':
    pokemon['Type 2'][i] = 'NoLabel'

# æ–¹æ³•äºŒ: pokemon['Type 2'].replace('0', 'NoLabel',inplace=True)
type2 = pokemon[pokemon['Generation'] == 2]['Type 2']
explode = np.arange(len(type2.unique())) * 0.01   # çªå‡ºçš„éƒ¨åˆ†

colors = ['red', 'blue', 'yellow', 'green', 'purple', 'orange', 'pink', 'brown']

# draw the plot
type2.value_counts().plot.pie(
    figsize = (7,7),
    title = "Percentage of Different Type 2 of Pokemon",
    explode = explode,
    colors = colors,
    autopct = '%1.1f%%',   # æ¨™ç¤ºçš„æ ¼å¼
    shadow = True,
    startangle = 90       # èµ·å§‹è§’åº¦å¾ä¸Šæ–¹90åº¦é–‹å§‹
)

plt.tight_layout() # èª¿æ•´ä½ˆå±€
plt.show()

"""# Box Plot"""

# å»ºç«‹ä¸€å€‹ 1*2çš„ç•«å¸ƒ
fig, ax = plt.subplots(1, 2, figsize=(12, 5))
# æŸ¥çœ‹ç¬¬ä¸€ä»£çš„ç¥å¥‡å¯¶è²ï¼Œå„é¡åˆ¥ (Type 1) çš„ Total çš„æœ€å¤§å€¼/ç¬¬ä¸‰å››åˆ†ä½æ•¸/ä¸­ä½æ•¸/ç¬¬ä¸€å››åˆ†ä½æ•¸
sns.boxplot(x='Total', y='Type 1', data=pokemon[pokemon['Generation'] == 1],hue="Type 1", ax=ax[0])
ax[0].set(ylabel='Pokemon type', xlabel='Total')  # è¨­å®š x è»¸ / y è»¸åç¨±
ax[0].set_title('Overall Distribution for Generation 1', fontsize=14) # è¨­å®šæ¨™é¡Œ

# æŸ¥çœ‹ç¬¬ä¸€ä»£çš„ç¥å¥‡å¯¶è²ï¼Œå„é¡åˆ¥ (Type 1) çš„ Attack çš„æœ€å¤§å€¼/ç¬¬ä¸‰å››åˆ†ä½æ•¸/ä¸­ä½æ•¸/ç¬¬ä¸€å››åˆ†ä½æ•¸
sns.boxplot(x='Attack', y='Type 1', data=pokemon[pokemon['Generation'] == 1],hue="Type 1", ax=ax[1])
ax[1].set(xlabel='Attack strength', ylabel='Type of pokemon') # è¨­å®š x è»¸ / y è»¸åç¨±
ax[1].set_title('Attack Strength Distribution for Generation 1', fontsize=14)  # è¨­å®šæ¨™é¡Œ

plt.tight_layout()
plt.show()

"""### å°ç·´ç¿’
2 pies in 1
pie plot 1: Type1 result

pir plot2: å°ç·´ç¿’çš„çµæœ
"""

#Practice
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np

# å»ºç«‹ 1x2 ç•«å¸ƒ
fig, ax = plt.subplots(1, 2, figsize=(12, 5))

# ç¬¬ä¸€å¼µåœ– (Generation 1 çš„ Type 1 åˆ†å¸ƒ)
type_counts = pokemon[pokemon['Generation'] == 1]['Type 1'].value_counts()
explode = np.arange(len(type_counts)) * 0.01  # è®“æ¯å€‹å€å¡Šç¨å¾®çªå‡º

ax[0].pie(type_counts, labels=type_counts.index, explode=explode, autopct='%1.1f%%', startangle=90)
ax[0].set_title('Overall Distribution for Generation 1', fontsize=14)

# ç¬¬äºŒå¼µåœ– (Generation 2 çš„ Type 2 åˆ†å¸ƒ)
type2_counts = pokemon[pokemon['Generation'] == 2]['Type 2'].value_counts()
explode2 = np.arange(len(type2_counts)) * 0.01  # è®“æ¯å€‹å€å¡Šç¨å¾®çªå‡º

# å‹•æ…‹ç”Ÿæˆé¡è‰²ï¼ˆè‹¥é¡åˆ¥è¶…é 8 å€‹ï¼Œé˜²æ­¢é¡è‰²æ•¸ä¸è¶³ï¼‰
colors = plt.cm.tab20.colors[:len(type2_counts)]

ax[1].pie(
    type2_counts,
    labels=type2_counts.index,
    explode=explode2,
    colors=colors,
    autopct='%1.1f%%',
    shadow=True,
    startangle=90
)
ax[1].set_title('Overall Distribution for Generation 2', fontsize=14)

plt.show()

"""NetworkX data analysis
===

åŸºæœ¬ä»‹ç´¹
"""

# import networkx as nx
# å»ºç«‹ç©º graph ä¸åŒ…å«ç¯€é»èˆ‡é‚Š
G1 = nx.Graph()          # ç„¡å‘åœ–
G2 = nx.DiGraph()        # æœ‰å‘åœ–

# Node
# æ¯å€‹ç¯€é»éƒ½æœ‰å”¯ä¸€çš„æ¨™ç±¤:labelï¼Œå¯ä»¥ç”¨æ•´æ•¸æˆ–å­—å…ƒè¡¨ç¤ºï¼Œå¦å¤–é‚„å¯ä»¥æœ‰é¡å¤–è‡ªè¨‚å±¬æ€§

G1.add_node(1)  # æ–°å¢ç¯€é» 1ï¼Œç„¡å±¬æ€§

G1.add_node(2, name='n1', weight=1.0, date='May-16')    # æ–°å¢ç¯€é» 2ï¼Œå±¬æ€§ï¼šname, weight, date

G1.add_nodes_from([3, 4, 5])      # åŒæ™‚æ–°å¢å¤šå€‹ç¯€é»

G1.add_nodes_from([(6, {'type': 'int'}), ('7', {'type': 'str'})]) # åŒæ™‚æ–°å¢å¤šå€‹ç¯€é»ï¼Œä¸¦è¨­å®šå„è‡ªå±¬æ€§ add_nodes_from([(node, {attribute:v alue}), (...)])

G1.remove_node('7')  # åˆªé™¤ç¯€é» '7'

# G1.remove_nodes_from([node1, node2, ...])  # åˆªé™¤å¤šå€‹ç¯€é»

G1.nodes.data() # get information about all nodes in a graph

nx.draw(G1, with_labels=True)

# Edge
# ç¯€é»èˆ‡ç¯€é»ä¹‹é–“çš„é€£æ¥

G1.add_edge(1, 2)                # æ–°å¢é ‚é» 1 å’Œé ‚é» 2 ä¹‹é–“çš„é‚Šï¼Œå¦‚é»ä¸å­˜åœ¨ï¼Œæœƒè‡ªå‹•æ–°å¢

G1.add_edge(3, 4, weight=2.7)    # æ–°å¢é ‚é» 3 å’Œé ‚é» 4 ä¹‹é–“çš„é‚Šï¼Œå®šç¾©å…¶ weight

G1.add_edges_from([(5, 6), (6 , 2)])  # åŒæ™‚æ–°å¢å¤šå€‹é‚Š

G1.add_edges_from([(2, 3, {'weight': 10})])  # åŒæ™‚æ–°å¢å¤šå€‹é‚Šï¼Œä¸¦è¨­å®šå„è‡ªå±¬æ€§ add_nodes_from([(node1, node2, {attribute:v alue}), (...)])

# G1.remove_edge(0, 1)  # å¾åœ–ä¸­åˆªé™¤é‚Š 0-1
# G1.remove_edges_from([(2,3),(1,5),(6,7)])  # åˆªé™¤å¤šæ¢é‚Š

# ç•«å‡ºä¾†çœ‹çœ‹ nx.draw()
nx.draw(G1, with_labels=True)

# è¨ˆç®—å¹³å‡æœ€çŸ­è·¯å¾‘é•·åº¦
nx.average_shortest_path_length(G1)

shortest_path_length = nx.shortest_path_length(G1, source=1, target=4, weight="weight")
print(f"Shortest path length (weighted) from 1 to 4: {shortest_path_length}")

"""æŸ¥çœ‹åœ–çš„åŸºæœ¬è³‡è¨Š"""

print("ç¯€é»æ•¸é‡:", G1.number_of_nodes())
print("é‚Šæ•¸é‡:", G1.number_of_edges())
print("ç¯€é»åˆ—è¡¨:", G1.nodes())
print("é‚Šåˆ—è¡¨:", G1.edges())
print("ç¯€é»å…§å®¹:", G1.nodes.data())
print("é‚Šå…§å®¹:", G1.edges.data())

"""##pokemon åˆ†æ"""

# ä»¥ Type 1 ç‚ºä¸­å¿ƒé»ï¼Œé€£æ¥è‘—å±¬æ–¼ Type 1 çš„ç¥å¥‡å¯¶è²å€‘
# from_pandas_edgelist(df,column name1, column name 2, create_using = None) å¾ dataframe å»ºç«‹ graph (undirected graph)
# create_using = None --> undirected graph, create_using = nx.DiGraph() --> directed graph
g = nx.from_pandas_edgelist(pokemon, source='Name', target='Type 1') #edges created between 'Name' and its corresponding 'Type 1'
plt.figure(figsize=(20, 20))
position = nx.spring_layout(g, k=0.15) # kç”¨æ–¼èª¿ç¯€ç¯€é»ä¹‹é–“çš„ä½ç½®
nx.draw_networkx(g, position, node_size=25, node_color='blue')
plt.show()

# ä»¥ Type 1 ç‚ºä¸­å¿ƒé»ï¼Œé€£æ¥è‘—å±¬æ–¼ Type 1 çš„ã€Œç¬¬ä¸€ä»£ã€ç¥å¥‡å¯¶è²å€‘
g = nx.from_pandas_edgelist(pokemon[pokemon['Generation'] == 1], source='Name', target='Type 1')
plt.figure(figsize=(20, 20))
pos = nx.spring_layout(g, k=0.15)
nx.draw_networkx(g, pos, node_size=800, node_color='pink', font_size=15)
plt.show()

"""## t-SNE é™ç¶­"""

import pandas as pd
import matplotlib.pyplot as plt
from sklearn.manifold import TSNE
from sklearn.preprocessing import LabelEncoder


attributes = ['HP', 'Attack', 'Defense', 'Sp. Atk', 'Sp. Def', 'Speed'] # the columns that will be used for dimension reduction
X = pokemon[attributes]

# æ±ºå®šè¦é™æˆå¹¾ç¶­
tsne = TSNE(n_components=2, random_state=42)
X_tsne = tsne.fit_transform(X)

plt.figure(figsize=(10, 8)) # ç•«å¸ƒå¤§å°
total_values = pokemon['Total'] # é¸æ“‡é¡è‰²çš„æ•¸å€¼
color_map = plt.cm.viridis  # é¸æ“‡colormap
plt.scatter(X_tsne[:, 0], X_tsne[:, 1], c=total_values, cmap=color_map) #ç•«é¡è‰²

plt.title('t-SNE Visualization of Pokemon Attributes')
plt.xlabel('t-SNE Component 1')
plt.ylabel('t-SNE Component 2')
plt.colorbar(label='Total')  # Adding colorbar
plt.grid(True)
plt.show()

import pandas as pd
import matplotlib.pyplot as plt
from sklearn.manifold import TSNE
from sklearn.preprocessing import LabelEncoder

attributes = ['HP', 'Attack', 'Defense', 'Sp. Atk', 'Sp. Def', 'Speed']
X = pokemon[attributes]

# æ±ºå®šè¦é™æˆå¹¾ç¶­
tsne = TSNE(n_components=2, random_state=42)
X_tsne = tsne.fit_transform(X)

plt.figure(figsize=(10, 8)) #ç•«å¸ƒå¤§å°
types = pokemon['Legendary'] # é¸æ“‡é¡è‰²çš„ä¾æ“š
unique_types = types.unique() # å–å¾—å”¯ä¸€çš„é¡åˆ¥(True/False)
colors = plt.cm.tab10.colors[:len(unique_types)] #é¸æ“‡é¡è‰²

for i, type_name in enumerate(unique_types): #æ ¹æ“šç¨®é¡ç•«ç›¸å°çš„é¡è‰²
    plt.scatter(X_tsne[types == type_name, 0], X_tsne[types == type_name, 1], label=type_name, color=colors[i])
    # types == type_name æœƒå›å‚³å¸ƒæ—é™£åˆ—ï¼Œæ¨™è¨˜ç¬¦åˆæ¢ä»¶çš„è³‡æ–™

plt.title('t-SNE Visualization of Pokemon Attributes')
plt.xlabel('t-SNE Component 1')
plt.ylabel('t-SNE Component 2')
plt.legend(title='Type 1', bbox_to_anchor=(1.05, 1), loc='upper left')
plt.grid(True)
plt.show()

"""# Quiz

### Quiz1:

è«‹ç”¨barplotç•«å‡ºä¸åŒä¸–ä»£(Generation)ä»¥åŠæ˜¯å¦ç‚ºLegendaryçš„å¹³å‡HPé•·æ¢åœ–ï¼Œä¸¦æ¨™å‡ºæ˜¯å¦ç‚ºLegandaryçš„HPç¸½å¹³å‡ç·š
"""

################### Try it ########################

# é•·æ¢åœ–: æ¯ç¨® Type 1 çš„ Defense å¹³å‡å€¼
# åˆ©ç”¨ hue å¢åŠ ç¨®é¡

plt.figure(figsize=(10, 6))    # è¨­å®šåœ–çš„å¤§å°
ax = sns.barplot(x='Generation', y='HP',hue="Legendary", data=pokemon.groupby(['Generation','Legendary'], as_index=False)['HP'].mean())   # é•·æ¢åœ– barplot()
ax.set(xlabel='Generation', ylabel='Average HP')     # è¨­å®š x è»¸ / y è»¸åç¨±
ax.set_xticklabels(ax.get_xticklabels(), rotation=90)

#plt.axhline() ç•«æ°´å¹³ç·š / plt.axvline() ç•«å‚ç›´ç·š
plt.axhline(pokemon[pokemon['Legendary']==True]['HP'].mean(), color='red', linestyle='--') # æ˜¯Legendaryçš„ Defense å¹³å‡ç·š
plt.axhline(pokemon[pokemon['Legendary']==False]['HP'].mean(), color='blue', linestyle=':') # ä¸æ˜¯Legendaryçš„ Defense å¹³å‡ç·š

plt.show()

"""### Quiz2:
 å®Œæˆä»¥ä¸‹ graph è¨­å®šï¼Œä¸¦åˆ—å°åœ–å‹

![image](https://i.imgur.com/7Aag11q.png)

Hint:

(1) è«‹å»ºç«‹ä»¥ G ç‚ºè®Šæ•¸åç¨±çš„ graph --> Digraph()

(2) è¨­å®šï¼š

*   ç¯€é» labelï¼šAlice, Bob, Store, Manufacturer
*   ç¯€é»å±¬æ€§ roleï¼šPerson & Retailer & Supplier
*   é‚Šå±¬æ€§ relationï¼šFriend & Customer & Belong to

(3) è«‹æ³¨æ„é‚Šçš„ç®­é ­æ–¹å‘ï¼Œå¦‚æœæ˜¯é›™å‘ç®­é ­çš„é‚Šè¦æœ‰å…©æ¬¡

"""

# ===== Try it =======
# type here
G = nx.DiGraph()

G.add_node('Alice', role='Person')
G.add_node('Bob', role='Person')
G.add_node('Store', role='Retailer')
G.add_node('Manufacturer', role='Supplier')

G.add_edge('Alice', 'Bob', relation='Friend')
G.add_edge('Bob', 'Alice', relation='Friend')
G.add_edge('Store', 'Manufacturer', relation='Belong to')
G.add_edge('Bob', 'Store', relation='Customer')
G.add_edge('Alice', 'Store', relation='Customer')
# ===== ä»¥ä¸‹è«‹å‹¿æ›´å‹• =====
node_labels = {node[0]: f"{node[0]}\n{node[1]['role']}" for node in G.nodes.data()}
edge_labels = {(u, v): G[u][v]['relation'] for u, v in G.edges()}

pos = nx.spring_layout(G, seed=0)
nx.draw(G, pos, node_size=1000, node_color='lightblue')
nx.draw_networkx_labels(G, pos, labels=node_labels, font_size=10, font_weight='bold')
nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels)
plt.show()

"""###Quiz3:

åˆ©ç”¨ Pokemon.csv å®Œæˆä»¥ä¸‹çš„ graph (ä¸è¦è‡ªå·±key!)
![](https://i.imgur.com/HQdXUqd.png)
ä»¥ Generation ç‚ºå…­å€‹ä¸­å¿ƒï¼Œé€£æ¥å„è‡ª Attack æœ€é«˜å‰ä¸‰åçš„ç¥å¥‡å¯¶è²

Hint: groupby(), sort_values()...

"""

# æ¯å€‹ generation å‰ä¸‰åçš„å€¼ï¼Œåƒ…ä¾›åƒè€ƒ

# ===== Try it =======

## prepare the dataframe
# é¸å–æ¯å€‹ä¸–ä»£ Attack å€¼æœ€é«˜çš„å‰ä¸‰éš»å¯¶å¯å¤¢
sorted_pokemon = pokemon.sort_values(by=['Generation', 'Attack'], ascending=[True, False])
top_attack_pokemon = sorted_pokemon.groupby("Generation").head(3)

# å»ºç«‹é‚Š (Edges) è³‡æ–™
edges = []
for gen in top_attack_pokemon['Generation'].unique():
    top3 = top_attack_pokemon[top_attack_pokemon['Generation'] == gen]['Name'].tolist()
    for pokemon_name in top3:
        edges.append((f'{gen}', pokemon_name))  # é€£æ¥å‰ä¸‰åå¯¶å¯å¤¢

# å»ºç«‹ NetworkX åœ–å½¢
g = nx.Graph()
g.add_edges_from(edges)  # å¾ Edges æ¸…å–®å»ºç«‹åœ–å½¢

# ===== ä»¥ä¸‹è«‹å‹¿æ›´å‹• =====
plt.figure(figsize=(15, 8))
pos = nx.circular_layout(g)  # ä»¥åœ“å½¢èª¿ç¯€ç¯€é»ä¹‹é–“çš„ä½ç½®
nx.draw_networkx(g, pos, node_size=500, node_color='pink')
plt.show()

